<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#e85d3f">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <title>üçú NomNom Nam</title>
  <style>
    :root {
      --bg: #0f0f0f;
      --surface: #1a1a1a;
      --surface2: #242424;
      --border: #2e2e2e;
      --text: #f0ede8;
      --text-muted: #888;
      --accent: #e85d3f;
      --accent2: #f4a435;
      --green: #4caf50;
      --radius: 16px;
      --radius-sm: 10px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      min-height: 100dvh;
      overflow-x: hidden;
    }

    /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
    header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(15,15,15,0.92);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      padding: 14px 16px 0;
      border-bottom: 1px solid var(--border);
    }

    .header-top {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }

    .logo { font-size: 26px; }

    .header-titles { flex: 1; }

    h1 {
      font-size: 20px;
      font-weight: 800;
      letter-spacing: -0.5px;
      color: var(--text);
    }

    .subtitle {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 1px;
    }

    .dish-count {
      background: var(--accent);
      color: white;
      font-size: 11px;
      font-weight: 700;
      padding: 3px 8px;
      border-radius: 20px;
    }

    /* ‚îÄ‚îÄ FILTER TABS ‚îÄ‚îÄ */
    .filter-tabs {
      display: flex;
      gap: 6px;
      margin-bottom: 10px;
    }

    .filter-tab {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-muted);
      padding: 6px 14px;
      border-radius: 20px;
      border: none;
      background: transparent;
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }

    .filter-tab.active {
      color: var(--text);
      background: var(--surface2);
    }

    /* ‚îÄ‚îÄ FILTER PILLS ‚îÄ‚îÄ */
    .filters-row {
      overflow-x: auto;
      display: flex;
      gap: 7px;
      padding-bottom: 12px;
      scrollbar-width: none;
    }
    .filters-row::-webkit-scrollbar { display: none; }

    .pill {
      white-space: nowrap;
      font-size: 13px;
      font-weight: 600;
      padding: 7px 14px;
      border-radius: 20px;
      border: 1.5px solid var(--border);
      background: transparent;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.18s;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .pill:active { transform: scale(0.94); }

    .pill.active {
      background: var(--accent);
      border-color: var(--accent);
      color: white;
    }

    .pill .pill-icon { font-size: 14px; }

    /* ‚îÄ‚îÄ GRID ‚îÄ‚îÄ */
    main {
      padding: 14px 12px 100px;
    }

    .results-label {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 10px;
      padding: 0 2px;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    /* ‚îÄ‚îÄ CARD ‚îÄ‚îÄ */
    .card {
      border-radius: var(--radius);
      overflow: hidden;
      background: var(--surface);
      cursor: pointer;
      transition: transform 0.18s, box-shadow 0.18s;
      position: relative;
      border: 1px solid var(--border);
    }

    .card:active { transform: scale(0.97); }

    .card-img-wrap {
      position: relative;
      aspect-ratio: 4/3;
      overflow: hidden;
      background: var(--surface2);
    }

    .card-img-wrap img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transition: opacity 0.3s;
      z-index: 1;
    }

    .card-img-wrap img.loading { opacity: 0; }
    .card-img-wrap img.loaded { opacity: 1; }

    .img-placeholder {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 42px;
      background: linear-gradient(135deg, var(--surface) 0%, var(--surface2) 100%);
    }

    .play-badge {
      position: absolute;
      bottom: 8px;
      right: 8px;
      width: 36px;
      height: 36px;
      background: rgba(0,0,0,0.7);
      backdrop-filter: blur(6px);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      border: 1.5px solid rgba(255,255,255,0.15);
      transition: transform 0.15s;
      z-index: 2;
    }

    .card:active .play-badge { transform: scale(1.15); }

    .play-badge.playing {
      background: var(--accent);
      border-color: var(--accent);
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(232,93,63,0.5); }
      50% { transform: scale(1.08); box-shadow: 0 0 0 8px rgba(232,93,63,0); }
    }

    .card-body {
      padding: 10px 10px 11px;
    }

    .card-vi {
      font-size: 17px;
      font-weight: 800;
      letter-spacing: -0.3px;
      color: var(--text);
      line-height: 1.2;
      margin-bottom: 3px;
    }

    .card-en {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 5px;
    }

    .card-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 3px;
    }

    .tag {
      font-size: 10px;
      font-weight: 600;
      padding: 2px 7px;
      border-radius: 10px;
      background: var(--surface2);
      color: var(--text-muted);
      letter-spacing: 0.2px;
    }

    .tag.region { background: rgba(244,164,53,0.15); color: var(--accent2); }
    .tag.city   { background: rgba(76,175,80,0.15);  color: var(--green); }

    /* ‚îÄ‚îÄ DETAIL SHEET ‚îÄ‚îÄ */
    .sheet-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      z-index: 200;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
      backdrop-filter: blur(4px);
    }

    .sheet-overlay.open {
      opacity: 1;
      pointer-events: auto;
    }

    .sheet {
      position: fixed;
      inset: 0;
      z-index: 201;
      background: var(--surface);
      border-radius: 0;
      transform: translateY(100%);
      transition: transform 0.38s cubic-bezier(0.34, 1.10, 0.64, 1);
      overflow-y: auto;
      overscroll-behavior: contain;
      padding-bottom: env(safe-area-inset-bottom, 20px);
    }

    .sheet.open {
      transform: translateY(0);
    }

    .sheet-handle {
      width: 40px;
      height: 4px;
      background: var(--border);
      border-radius: 2px;
      margin: 12px auto 0;
    }

    .sheet-img {
      width: 100%;
      aspect-ratio: 16/9;
      object-fit: cover;
      display: block;
      margin-top: 10px;
    }

    .sheet-content {
      padding: 16px 20px 24px;
    }

    .sheet-name-row {
      display: flex;
      align-items: center;
      gap: 14px;
      margin-bottom: 8px;
    }

    .sheet-name-col { flex: 1; min-width: 0; }

    .sheet-vi-name {
      font-size: 36px;
      font-weight: 900;
      letter-spacing: -1px;
      color: var(--text);
      line-height: 1.1;
      margin-bottom: 4px;
    }

    .sheet-en-name {
      font-size: 17px;
      color: var(--text-muted);
      font-weight: 500;
      margin-bottom: 6px;
    }

    .sheet-pronunciation {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--surface2);
      border-radius: 10px;
      padding: 7px 12px;
      margin-bottom: 14px;
      font-size: 14px;
      color: var(--text-muted);
    }

    .pron-label { font-size: 11px; text-transform: uppercase; letter-spacing: 0.5px; }
    .pron-text { font-weight: 700; color: var(--text); font-style: italic; font-size: 15px; }

    .sheet-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 16px;
    }

    .meta-chip {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 12px;
      font-weight: 600;
      padding: 5px 11px;
      border-radius: 20px;
      border: 1.5px solid var(--border);
    }

    .meta-chip.region { border-color: rgba(244,164,53,0.4); background: rgba(244,164,53,0.08); color: var(--accent2); }
    .meta-chip.city   { border-color: rgba(76,175,80,0.4);  background: rgba(76,175,80,0.08);  color: var(--green); }
    .meta-chip.type   { border-color: rgba(240,237,232,0.15); color: var(--text-muted); }

    .sheet-section-title {
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .ingredients-list {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 16px;
    }

    .ingredient-chip {
      font-size: 13px;
      font-weight: 500;
      padding: 5px 12px;
      border-radius: 20px;
      background: var(--surface2);
      border: 1px solid var(--border);
      color: var(--text);
    }

    .sheet-description {
      font-size: 14px;
      color: var(--text-muted);
      line-height: 1.6;
      margin-bottom: 20px;
    }

    /* ‚îÄ‚îÄ SPEAK BUTTON ‚îÄ‚îÄ */
    .speak-btn {
      flex-shrink: 0;
      width: 72px;
      height: 72px;
      padding: 0;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.15s, background 0.2s;
    }

    .speak-btn:active { transform: scale(0.97); }

    .speak-btn.playing {
      background: #c0392b;
      animation: speakPulse 0.8s infinite;
    }

    @keyframes speakPulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(232,93,63,0.5); }
      50% { box-shadow: 0 0 0 16px rgba(232,93,63,0); }
    }

    /* ‚îÄ‚îÄ EMPTY STATE ‚îÄ‚îÄ */
    .empty-state {
      grid-column: 1 / -1;
      text-align: center;
      padding: 60px 20px;
      color: var(--text-muted);
    }
    .empty-state .emoji { font-size: 48px; margin-bottom: 12px; display: block; }
    .empty-state p { font-size: 15px; }

    /* ‚îÄ‚îÄ SCROLLBAR ‚îÄ‚îÄ */
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

    /* ‚îÄ‚îÄ PLAYING INDICATOR ‚îÄ‚îÄ */
    .now-playing-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 150;
      background: var(--accent);
      transform: translateY(100%);
      transition: transform 0.3s;
      padding: 10px 16px calc(10px + env(safe-area-inset-bottom, 8px));
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
      font-size: 14px;
    }

    .now-playing-bar.visible { transform: translateY(0); }

    .sound-waves {
      display: flex;
      align-items: center;
      gap: 2px;
    }

    .wave-bar {
      width: 3px;
      background: white;
      border-radius: 2px;
      animation: wave 0.8s infinite ease-in-out;
    }

    .wave-bar:nth-child(1) { height: 8px; animation-delay: 0s; }
    .wave-bar:nth-child(2) { height: 16px; animation-delay: 0.15s; }
    .wave-bar:nth-child(3) { height: 12px; animation-delay: 0.3s; }
    .wave-bar:nth-child(4) { height: 20px; animation-delay: 0.1s; }
    .wave-bar:nth-child(5) { height: 10px; animation-delay: 0.25s; }

    @keyframes wave {
      0%, 100% { transform: scaleY(0.5); }
      50% { transform: scaleY(1.2); }
    }

    /* ‚îÄ‚îÄ TABLET / DESKTOP ‚îÄ‚îÄ */
    @media (min-width: 520px) {
      .grid { grid-template-columns: 1fr 1fr 1fr; gap: 12px; }
      main { padding: 16px 16px 100px; }
    }

    @media (min-width: 900px) {
      .grid { grid-template-columns: repeat(4, 1fr); }
    }

    /* ‚îÄ‚îÄ MODE TABS (Dishes / Phrases) ‚îÄ‚îÄ */
    .mode-tabs {
      display: flex;
      gap: 6px;
      padding-bottom: 10px;
    }

    .mode-tab {
      flex: 1;
      font-size: 14px;
      font-weight: 700;
      padding: 9px 14px;
      border-radius: 12px;
      border: 1.5px solid var(--border);
      background: transparent;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.2s;
    }

    .mode-tab.active {
      background: var(--accent);
      border-color: var(--accent);
      color: white;
    }

    /* ‚îÄ‚îÄ SEARCH BAR ‚îÄ‚îÄ */
    .search-wrap {
      display: flex;
      align-items: center;
      background: var(--surface2);
      border-radius: 12px;
      padding: 0 12px;
      gap: 8px;
      margin-bottom: 10px;
      border: 1.5px solid var(--border);
      transition: border-color 0.2s;
    }

    .search-wrap:focus-within { border-color: var(--accent); }

    .search-icon { color: var(--text-muted); font-size: 15px; flex-shrink: 0; }

    .search-input {
      flex: 1;
      background: none;
      border: none;
      color: var(--text);
      font-size: 15px;
      padding: 10px 0;
      outline: none;
    }

    .search-input::placeholder { color: var(--text-muted); }

    .search-clear {
      background: none;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      font-size: 18px;
      line-height: 1;
      padding: 4px;
      display: none;
      border-radius: 50%;
      transition: color 0.15s;
    }

    .search-clear.visible { display: block; }
    .search-clear:hover { color: var(--text); }

    /* ‚îÄ‚îÄ PHRASE CARDS ‚îÄ‚îÄ */
    #phraseGrid { display: none; padding: 12px 16px 100px; }

    .phrase-category-label {
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      color: var(--text-muted);
      padding: 18px 0 8px;
    }

    .phrase-category-label:first-child { padding-top: 4px; }

    .phrase-card {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 14px 16px;
      display: flex;
      align-items: center;
      gap: 14px;
      cursor: pointer;
      transition: transform 0.18s, box-shadow 0.18s;
      border: 1px solid var(--border);
      margin-bottom: 8px;
    }

    .phrase-card:active { transform: scale(0.98); }

    .phrase-card.playing { border-color: var(--accent); background: rgba(232,93,63,0.07); }

    .phrase-text { flex: 1; min-width: 0; }

    .phrase-vi {
      font-size: 22px;
      font-weight: 800;
      color: var(--text);
      letter-spacing: -0.3px;
      margin-bottom: 3px;
    }

    .phrase-en {
      font-size: 13px;
      color: var(--text-muted);
      font-weight: 500;
      margin-bottom: 4px;
    }

    .phrase-pron {
      font-size: 12px;
      font-style: italic;
      color: var(--accent2);
      font-weight: 600;
    }

    .phrase-play {
      flex-shrink: 0;
      width: 48px;
      height: 48px;
      background: var(--accent);
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.15s, background 0.2s;
    }

    .phrase-card.playing .phrase-play { background: #c0392b; }
  </style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="header-top">
    <span class="logo">üçú</span>
    <div class="header-titles">
      <h1>NomNom Nam</h1>
      <div class="subtitle">Tap any dish ¬∑ Aunty will know what you want</div>
    </div>
    <span class="dish-count" id="dishCount">72</span>
  </div>

  <div class="mode-tabs">
    <button class="mode-tab active" data-mode="dishes" onclick="setMode('dishes')">üçú Dishes</button>
    <button class="mode-tab" data-mode="phrases" onclick="setMode('phrases')">üí¨ Phrases</button>
  </div>

  <div id="dishControls">
    <div class="filter-tabs" id="filterTabs">
      <button class="filter-tab active" data-group="all">All</button>
      <button class="filter-tab" data-group="region">Region</button>
      <button class="filter-tab" data-group="city">City</button>
      <button class="filter-tab" data-group="type">Type</button>
    </div>
    <div class="filters-row" id="pillsRow"></div>
    <div class="search-wrap" id="searchWrap">
      <span class="search-icon">‚åï</span>
      <input class="search-input" id="searchInput" type="search"
        placeholder="Search dishes‚Ä¶"
        oninput="onSearch(event)"
        autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
      <button class="search-clear" id="searchClear" onclick="clearSearch()" aria-label="Clear">‚úï</button>
    </div>
  </div>
</header>

<!-- MAIN GRID / PHRASES -->
<main>
  <div class="results-label" id="resultsLabel"></div>
  <div class="grid" id="grid"></div>
  <div id="phraseGrid"></div>
</main>

<!-- NOW PLAYING BAR -->
<div class="now-playing-bar" id="nowPlayingBar">
  <div class="sound-waves">
    <div class="wave-bar"></div>
    <div class="wave-bar"></div>
    <div class="wave-bar"></div>
    <div class="wave-bar"></div>
    <div class="wave-bar"></div>
  </div>
  <span id="nowPlayingText"></span>
</div>

<!-- DETAIL SHEET -->
<div class="sheet-overlay" id="sheetOverlay" onclick="closeSheet()"></div>
<div class="sheet" id="sheet">
  <div class="sheet-handle"></div>
  <img class="sheet-img" id="sheetImg" src="" alt="" onerror="this.style.display='none'">
  <div class="sheet-content">
    <div class="sheet-name-row">
      <div class="sheet-name-col">
        <div class="sheet-vi-name" id="sheetViName"></div>
        <div class="sheet-en-name" id="sheetEnName"></div>
      </div>
      <button class="speak-btn" id="sheetSpeakBtn" onclick="speakFromSheet()">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none">
          <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" fill="white"/>
          <path d="M15.54 8.46a5 5 0 0 1 0 7.07" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M19.07 4.93a10 10 0 0 1 0 14.14" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>

    <div class="sheet-pronunciation" id="sheetPron">
      <span class="pron-label">Say:</span>
      <span class="pron-text" id="sheetPronText"></span>
    </div>

    <div class="sheet-meta" id="sheetMeta"></div>

    <div class="sheet-section-title">Key Ingredients</div>
    <div class="ingredients-list" id="sheetIngredients"></div>

    <div class="sheet-section-title">About</div>
    <p class="sheet-description" id="sheetDesc"></p>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// DISH DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const dishes = [
  {
    id: "pho-bo",
    vi: "Ph·ªü b√≤",
    en: "Beef Noodle Soup",
    pron: "fuh baw",
    region: "North",
    cities: ["Hanoi"],
    types: ["Noodle Soup", "Beef"],
    ingredients: ["rice noodles", "beef broth", "star anise", "cinnamon", "beef slices", "green onions", "basil", "lime", "bean sprouts", "hoisin sauce"],
    desc: "Vietnam's most iconic dish. A fragrant broth simmered for hours with spices, served with silky rice noodles and thinly sliced beef. Order 'Ph·ªü t√°i' for rare beef, 'Ph·ªü ch√≠n' for well-done.",
    emoji: "üçú",
    img: "images/pho-bo.jpg",
    audio: "audio/pho-bo.mp3"
  },
  {
    id: "banh-mi",
    vi: "B√°nh m√¨",
    en: "Vietnamese Sandwich",
    pron: "bahn mee",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Sandwich", "Pork", "Chicken"],
    ingredients: ["baguette", "p√¢t√©", "pork", "pickled daikon", "pickled carrot", "cucumber", "cilantro", "chili", "mayonnaise"],
    desc: "A crispy French-Vietnamese baguette stuffed with meats, pickled vegetables and fresh herbs. One of the world's greatest street food sandwiches. Costs about 20,000‚Äì40,000 VND.",
    emoji: "ü•ñ",
    img: "images/banh-mi.jpg",
    audio: "audio/banh-mi.mp3"
  },
  {
    id: "bun-bo-hue",
    vi: "B√∫n b√≤ Hu·∫ø",
    en: "Spicy Beef Noodle Soup",
    pron: "boon baw hway",
    region: "Central",
    cities: ["Hue"],
    types: ["Noodle Soup", "Beef", "Spicy"],
    ingredients: ["thick round noodles", "lemongrass broth", "beef shank", "pork knuckle", "shrimp paste", "chili oil", "banana blossom", "mint", "lime"],
    desc: "Considered by many to be superior even to Ph·ªü. A fiery, lemongrass-scented broth with thick round noodles and tender beef. The shrimp paste gives it a unique depth. Not for the spice-averse.",
    emoji: "üå∂Ô∏è",
    img: "images/bun-bo-hue.jpg",
    audio: "audio/bun-bo-hue.mp3"
  },
  {
    id: "cao-lau",
    vi: "Cao l·∫ßu",
    en: "Hoi An Noodles",
    pron: "cow loh",
    region: "Central",
    cities: ["Hoi An"],
    types: ["Noodles", "Pork"],
    ingredients: ["thick chewy noodles", "char siu pork", "pork crackling", "bean sprouts", "herbs", "star anise broth"],
    desc: "Unique to Hoi An ‚Äî supposedly only made correctly with water from the town's ancient wells. Thick, chewy noodles with BBQ pork and crunchy crackling in a small amount of broth.",
    emoji: "üçù",
    img: "images/cao-lau.jpg",
    audio: "audio/cao-lau.mp3"
  },
  {
    id: "mi-quang",
    vi: "M√¨ Qu·∫£ng",
    en: "Quang Noodles",
    pron: "mee kwang",
    region: "Central",
    cities: ["Da Nang"],
    types: ["Noodles", "Shrimp", "Pork"],
    ingredients: ["turmeric noodles", "shrimp", "pork", "quail eggs", "peanuts", "sesame crackers", "banana flower", "herbs", "minimal broth"],
    desc: "Da Nang's signature dish ‚Äî wide turmeric-yellow noodles with shrimp, pork, and a small splash of rich broth. Served with peanuts, crispy rice crackers, and a pile of fresh herbs.",
    emoji: "üü°",
    img: "images/mi-quang.jpg",
    audio: "audio/mi-quang.mp3"
  },
  {
    id: "banh-xeo",
    vi: "B√°nh x√®o",
    en: "Sizzling Crepe",
    pron: "bahn say-oh",
    region: "South",
    cities: ["Ho Chi Minh", "Da Nang"],
    types: ["Crepe", "Shrimp", "Pork"],
    ingredients: ["rice flour batter", "turmeric", "coconut milk", "shrimp", "pork belly", "bean sprouts", "spring onion", "lettuce", "herbs", "dipping sauce"],
    desc: "Named after the loud sizzle it makes when batter hits the pan. A crispy golden crepe stuffed with shrimp, pork and bean sprouts, wrapped in lettuce with fresh herbs and dipped in n∆∞·ªõc ch·∫•m.",
    emoji: "ü•û",
    img: "images/banh-xeo.jpg",
    audio: "audio/banh-xeo.mp3"
  },
  {
    id: "goi-cuon",
    vi: "G·ªèi cu·ªën",
    en: "Fresh Spring Rolls",
    pron: "goy koo-un",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Spring Roll", "Shrimp", "Pork"],
    ingredients: ["rice paper", "cooked shrimp", "pork slices", "rice vermicelli", "lettuce", "mint", "coriander", "hoisin peanut dipping sauce"],
    desc: "Light, fresh and healthy. Translucent rice paper rolls filled with shrimp, pork, herbs, and vermicelli. Perfect as a starter. Always served with a peanut-hoisin dipping sauce.",
    emoji: "üåØ",
    img: "images/goi-cuon.jpg",
    audio: "audio/goi-cuon.mp3"
  },
  {
    id: "cha-gio",
    vi: "Ch·∫£ gi√≤",
    en: "Fried Spring Rolls",
    pron: "cha yaw",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Spring Roll", "Fried", "Pork"],
    ingredients: ["rice paper", "minced pork", "crab meat", "glass noodles", "wood ear mushroom", "taro", "carrot", "n∆∞·ªõc ch·∫•m"],
    desc: "Crispy fried spring rolls packed with a savory pork and vegetable filling. The southern Vietnamese version uses rice paper wrappers that shatter when you bite them. Always eaten with n∆∞·ªõc ch·∫•m.",
    emoji: "ü•ü",
    img: "images/cha-gio.jpg",
    audio: "audio/cha-gio.mp3"
  },
  {
    id: "bun-cha",
    vi: "B√∫n ch·∫£",
    en: "Grilled Pork & Noodles",
    pron: "boon chah",
    region: "North",
    cities: ["Hanoi"],
    types: ["Grilled", "Pork", "Noodles"],
    ingredients: ["rice vermicelli", "charcoal-grilled pork patties", "pork belly", "fish sauce broth", "papaya", "carrot", "herbs", "garlic", "chili"],
    desc: "Hanoi's beloved lunch dish, made famous when Obama ate it with Anthony Bourdain. Grilled smoky pork patties and belly in a sweet vinegary fish sauce broth, served with cool vermicelli noodles.",
    emoji: "ü•©",
    img: "images/bun-cha.jpg",
    audio: "audio/bun-cha.mp3"
  },
  {
    id: "com-tam",
    vi: "C∆°m t·∫•m",
    en: "Broken Rice",
    pron: "kum tum",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Rice", "Pork", "Grilled"],
    ingredients: ["broken rice", "grilled pork chop", "shredded pork skin", "steamed egg cake", "fish sauce", "pickled vegetables", "scallion oil"],
    desc: "Saigon's breakfast of champions. Fragrant broken rice (smaller grains = better texture) topped with grilled pork chop, shredded pork skin, and a steamed egg cake. A perfect plate for about 30,000 VND.",
    emoji: "üçö",
    img: "images/com-tam.jpg",
    audio: "audio/com-tam.mp3"
  },
  {
    id: "banh-cuon",
    vi: "B√°nh cu·ªën",
    en: "Steamed Rice Rolls",
    pron: "bahn koo-un",
    region: "North",
    cities: ["Hanoi"],
    types: ["Rice Roll", "Pork", "Steamed"],
    ingredients: ["rice flour sheets", "minced pork", "wood ear mushroom", "fried shallots", "bean sprouts", "cucumber", "herbs", "fish sauce"],
    desc: "Silky thin rice flour sheets, freshly steamed and filled with seasoned minced pork and mushrooms, topped with crispy fried shallots. Best eaten for breakfast in Hanoi.",
    emoji: "ü´î",
    img: "images/banh-cuon.jpg",
    audio: "audio/banh-cuon.mp3"
  },
  {
    id: "hu-tieu",
    vi: "H·ªß ti·∫øu",
    en: "Southern Noodle Soup",
    pron: "hoo tee-ow",
    region: "South",
    cities: ["Ho Chi Minh", "Can Tho"],
    types: ["Noodle Soup", "Pork", "Shrimp"],
    ingredients: ["thin rice noodles", "clear pork broth", "shrimp", "pork slices", "quail eggs", "fried garlic", "bean sprouts", "chili", "lime"],
    desc: "The south's answer to Ph·ªü ‚Äî a clear, delicate pork and seafood broth with thin rice noodles. Can be ordered 'kh√¥' (dry, like a salad) or 'n∆∞·ªõc' (with soup). Often eaten for breakfast.",
    emoji: "ü¶ê",
    img: "images/hu-tieu.jpg",
    audio: "audio/hu-tieu.mp3"
  },
  {
    id: "bun-rieu",
    vi: "B√∫n ri√™u",
    en: "Crab Noodle Soup",
    pron: "boon ree-ow",
    region: "North",
    cities: ["Hanoi"],
    types: ["Noodle Soup", "Crab", "Tomato"],
    ingredients: ["rice vermicelli", "crab meat", "crab paste", "tomatoes", "tofu", "pork", "shrimp paste", "fried shallots", "herbs", "lime"],
    desc: "A tomato-red, tangy broth with fluffy crab meat balls, tofu, and pork. The sour notes come from tamarind or tomatoes. A refreshing change from heavier broth-based soups.",
    emoji: "ü¶Ä",
    img: "images/bun-rieu.jpg",
    audio: "audio/bun-rieu.mp3"
  },
  {
    id: "canh-chua",
    vi: "Canh chua",
    en: "Sour Fish Soup",
    pron: "kahn choo-ah",
    region: "South",
    cities: ["Ho Chi Minh", "Can Tho"],
    types: ["Soup", "Fish", "Sour"],
    ingredients: ["fish (catfish or snakehead)", "tamarind", "tomatoes", "pineapple", "bean sprouts", "taro stem", "okra", "dill", "elephant ear taro"],
    desc: "The heart of a Vietnamese family meal. A bright, tangy tamarind-based soup with fresh fish, pineapple, tomatoes, and vegetables. Sour, sweet, and savory all at once. Serve with steamed rice.",
    emoji: "üêü",
    img: "images/canh-chua.jpg",
    audio: "audio/canh-chua.mp3"
  },
  {
    id: "banh-khot",
    vi: "B√°nh kh·ªçt",
    en: "Mini Savory Pancakes",
    pron: "bahn khote",
    region: "South",
    cities: ["Vung Tau"],
    types: ["Pancake", "Shrimp", "Coconut"],
    ingredients: ["rice flour", "coconut milk", "turmeric", "shrimp", "mung beans", "fried shallots", "lettuce", "herbs", "dipping sauce"],
    desc: "Tiny, crispy-edged coconut rice pancakes topped with a whole shrimp, made in special cast iron pans. A specialty of Vung Tau. Wrap each one in lettuce with fresh herbs.",
    emoji: "ü•û",
    img: "images/banh-khot.jpg",
    audio: "audio/banh-khot.mp3"
  },
  {
    id: "banh-beo",
    vi: "B√°nh b√®o",
    en: "Steamed Water Fern Cakes",
    pron: "bahn bay-oh",
    region: "Central",
    cities: ["Hue"],
    types: ["Steamed Cake", "Shrimp"],
    ingredients: ["rice flour", "tapioca starch", "dried shrimp floss", "fried shallots", "pork rinds", "scallion oil", "fish sauce"],
    desc: "Hue's beloved snack ‚Äî small steamed rice cakes served in their little ceramic dishes, topped with dried shrimp floss, pork rinds, and scallion oil. Eaten by spooning from the dish.",
    emoji: "ü´ô",
    img: "images/banh-beo.jpg",
    audio: "audio/banh-beo.mp3"
  },
  {
    id: "che",
    vi: "Ch√®",
    en: "Sweet Dessert Soup",
    pron: "chay",
    region: "South",
    cities: ["Ho Chi Minh", "Hue"],
    types: ["Dessert", "Sweet", "Coconut"],
    ingredients: ["mung beans", "black-eyed peas", "taro", "coconut milk", "tapioca pearls", "pandan jelly", "crushed ice", "palm sugar"],
    desc: "Vietnamese sweet soups and puddings ‚Äî served hot or cold, with hundreds of varieties. 'Ch√® ba m√†u' (three-color dessert) is the most famous: layers of mung bean, jelly, and coconut milk over ice.",
    emoji: "üçÆ",
    img: "images/che.jpg",
    audio: "audio/che.mp3"
  },
  {
    id: "bo-luc-lac",
    vi: "B√≤ l√∫c l·∫Øc",
    en: "Shaking Beef",
    pron: "baw look luck",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Beef", "Stir-fry", "Grilled"],
    ingredients: ["beef tenderloin", "garlic", "soy sauce", "oyster sauce", "black pepper", "butter", "watercress", "lime-pepper dipping salt", "pickled onion"],
    desc: "Tender cubes of beef wok-tossed (shaken) with garlic and butter in a scorching hot wok, served on a bed of watercress. Dip each cube in lime juice with black salt and pepper. A showstopper.",
    emoji: "ü•©",
    img: "images/bo-luc-lac.jpg",
    audio: "audio/bo-luc-lac.mp3"
  },
  {
    id: "oc-len-xao-dua",
    vi: "·ªêc len x√†o d·ª´a",
    en: "Coconut Milk Mud Snails",
    pron: "oke len sao doo-ah",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Seafood", "Shellfish", "Spicy"],
    ingredients: ["mud snails", "coconut milk", "lemongrass", "chili", "fish sauce", "sugar"],
    desc: "Saigon shellfish classic: snails stir-cooked in rich coconut milk with lemongrass and chili. You sip out the meat and sauce.",
    emoji: "üêå",
    img: "images/oc-len-xao-dua.jpg",
    audio: "audio/oc-len-xao-dua.mp3"
  },
  {
    id: "oc-huong-rang-muoi",
    vi: "·ªêc h∆∞∆°ng rang mu·ªëi",
    en: "Babylon Snails with Salt",
    pron: "oke huong rang muoy",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Seafood", "Shellfish", "Snack"],
    ingredients: ["babylon snails", "salt", "garlic", "chili", "butter", "lime leaves"],
    desc: "Fragrant sea snails tossed in seasoned salt, garlic, and chili. One of the most ordered ·ªëc-diner plates.",
    emoji: "üêö",
    img: "images/oc-huong-rang-muoi.jpg",
    audio: "audio/oc-huong-rang-muoi.mp3"
  },
  {
    id: "oc-mong-tay-xao-toi",
    vi: "·ªêc m√≥ng tay x√†o t·ªèi",
    en: "Razor Clams Stir-Fried with Garlic",
    pron: "oke mong tay sao toy",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Seafood", "Shellfish", "Grilled"],
    ingredients: ["razor clams", "garlic", "butter", "scallions", "chili", "fish sauce"],
    desc: "Razor clams quickly stir-fried with lots of garlic and butter; salty, aromatic, and perfect with beer.",
    emoji: "ü¶™",
    img: "images/oc-mong-tay-xao-toi.jpg",
    audio: "audio/oc-mong-tay-xao-toi.mp3"
  },
  {
    id: "ngao-hap-sa",
    vi: "Ngao h·∫•p s·∫£",
    en: "Steamed Clams with Lemongrass",
    pron: "ngow hup sa",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Seafood", "Clam", "Soup"],
    ingredients: ["clams", "lemongrass", "ginger", "chili", "fish sauce", "herbs"],
    desc: "Simple steamed clams perfumed with lemongrass. Brothy, fresh, and common at seafood restaurants.",
    emoji: "ü¶™",
    img: "images/ngao-hap-sa.jpg",
    audio: "audio/ngao-hap-sa.mp3"
  },
  {
    id: "so-diep-nuong-mo-hanh",
    vi: "S√≤ ƒëi·ªáp n∆∞·ªõng m·ª° h√†nh",
    en: "Grilled Scallops with Scallion Oil",
    pron: "saw diep noong murr hanh",
    region: "South",
    cities: ["Ho Chi Minh", "Vung Tau"],
    types: ["Seafood", "Grilled", "Snack"],
    ingredients: ["scallops", "scallion oil", "roasted peanuts", "fish sauce", "chili"],
    desc: "Scallops grilled in-shell and topped with scallion oil and peanuts. A signature Vietnamese seafood appetizer.",
    emoji: "üêö",
    img: "images/so-diep-nuong-mo-hanh.jpg",
    audio: "audio/so-diep-nuong-mo-hanh.mp3"
  },
  {
    id: "chao-ga",
    vi: "Ch√°o g√†",
    en: "Chicken Congee",
    pron: "chow gah",
    region: "North",
    cities: ["Hanoi", "Ho Chi Minh"],
    types: ["Porridge", "Chicken", "Comfort Food"],
    ingredients: ["jasmine rice", "chicken", "ginger", "fish sauce", "fried shallots", "spring onions", "white pepper", "lime", "ginger soy dipping sauce"],
    desc: "Silky smooth rice porridge with hand-pulled chicken, aromatic ginger, and a shower of fried shallots and scallions. The ultimate Vietnamese comfort food ‚Äî eaten for breakfast, hangover cure, or when sick.",
    emoji: "üç≤",
    img: "images/chao-ga.jpg",
    audio: "audio/chao-ga.mp3"
  },

  // ‚îÄ‚îÄ LEGAL NOMADS PICKS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  {
    id: "pho-ga",
    vi: "Ph·ªü g√†",
    en: "Chicken Pho",
    pron: "fuh gah",
    region: "North",
    cities: ["Hanoi", "Ho Chi Minh"],
    types: ["Noodle Soup", "Chicken"],
    ingredients: ["rice noodles", "chicken broth", "poached chicken", "ginger", "star anise", "fried shallots", "spring onions", "basil", "lime", "chili"],
    desc: "The lighter, cleaner sibling of beef pho. A delicate golden broth with tender pulled chicken. Jodi Ettenberg's go-to when sick ‚Äî 'all I want is chicken noodle soup, and this is the Vietnamese version done right.'",
    emoji: "üêì",
    img: "images/pho-ga.jpg",
    audio: "audio/pho-ga.mp3"
  },
  {
    id: "bun-thit-nuong",
    vi: "B√∫n th·ªãt n∆∞·ªõng",
    en: "Grilled Pork Vermicelli",
    pron: "boon tit noong",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Noodles", "Pork", "Grilled"],
    ingredients: ["rice vermicelli", "charcoal-grilled marinated pork", "fried spring rolls", "pickled daikon", "carrot", "cucumber", "crushed peanuts", "fried shallots", "fresh herbs", "n∆∞·ªõc ch·∫•m"],
    desc: "A Saigon staple abbreviated 'BTN' by food insiders. A bowl of cool vermicelli topped with smoky grilled pork, crispy spring rolls, pickled veg, and herbs ‚Äî all drenched in n∆∞·ªõc ch·∫•m dipping sauce. Perfect any time of day.",
    emoji: "ü•ó",
    img: "images/bun-thit-nuong.jpg",
    audio: "audio/bun-thit-nuong.mp3"
  },
  {
    id: "bun-mam",
    vi: "B√∫n m·∫Øm",
    en: "Fermented Fish Noodle Soup",
    pron: "boon mahm",
    region: "South",
    cities: ["Ho Chi Minh", "Can Tho"],
    types: ["Noodle Soup", "Seafood", "Pork"],
    ingredients: ["thick rice noodles", "fermented fish paste broth", "shrimp", "pork belly", "squid", "eggplant", "lemongrass", "fresh herbs", "banana blossom", "bean sprouts"],
    desc: "Jodi's original reason for falling in love with Saigon ‚Äî a 'sweet-and-sour' fermented fish broth that sounds alarming but tastes extraordinary. Rich, funky, and complex. Often full of locals, tourists walk right past it.",
    emoji: "ü¶ë",
    img: "images/bun-mam.jpg",
    audio: "audio/bun-mam.mp3"
  },
  {
    id: "banh-canh-cua",
    vi: "B√°nh canh cua",
    en: "Thick Crab Noodle Soup",
    pron: "bahn kahn koo-ah",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Noodle Soup", "Crab", "Seafood"],
    ingredients: ["thick tapioca noodles", "crab meat", "crab roe", "pork", "fish cake", "fried shallots", "spring onions", "white pepper", "chili"],
    desc: "Vietnam's answer to udon. B√°nh canh noodles are thick and chewy ‚Äî made from tapioca or rice flour. The cua (crab) version is the most prized: a rich broth packed with chunky crab meat and roe. Deeply satisfying.",
    emoji: "ü¶Ä",
    img: "images/banh-canh-cua.jpg",
    audio: "audio/banh-canh-cua.mp3"
  },
  {
    id: "bot-chien",
    vi: "B·ªôt chi√™n",
    en: "Fried Rice Cakes",
    pron: "boat chee-en",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Fried", "Snack", "Street Food"],
    ingredients: ["rice flour cakes", "egg", "green onions", "soy sauce", "chili sauce", "bean sprouts", "dried shrimp"],
    desc: "A greasy, gloriously satisfying Saigon street snack. Chunky squares of rice flour cake fried in lard until crispy, then cracked eggs on top and tossed with green onions. Similar to Singapore's chai tow kueh but distinctly Vietnamese.",
    emoji: "üü®",
    img: "images/bot-chien.jpg",
    audio: "audio/bot-chien.mp3"
  },
  {
    id: "bo-la-lot",
    vi: "B√≤ l√° l·ªët",
    en: "Beef in Betel Leaves",
    pron: "baw lah lote",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Beef", "Grilled", "Street Food"],
    ingredients: ["minced beef", "lemongrass", "garlic", "shallots", "fish sauce", "betel leaves", "rice paper", "vermicelli", "fresh herbs", "peanut hoisin sauce"],
    desc: "Seasoned minced beef and lemongrass wrapped in fragrant betel leaves and grilled over charcoal. The leaves impart a distinctive peppery, herbal char. Served with rice paper for rolling, herbs, and dipping sauce. Unmissable.",
    emoji: "üçÉ",
    img: "images/bo-la-lot.jpg",
    audio: "audio/bo-la-lot.mp3"
  },
  {
    id: "bun-moc",
    vi: "B√∫n m·ªôc",
    en: "Mushroom Pork Noodle Soup",
    pron: "boon moke",
    region: "North",
    cities: ["Hanoi"],
    types: ["Noodle Soup", "Pork", "Mushroom"],
    ingredients: ["rice vermicelli", "clear pork broth", "pork paste balls", "mushrooms", "pork belly", "fried tofu", "shallots", "spring onions", "white pepper"],
    desc: "Jodi's go-to reset soup in Saigon ‚Äî a gentle, clear pork broth with springy pork paste balls and mushrooms. Not flashy, just deeply comforting. Perfect when you're overwhelmed by stronger flavors or just need something quiet.",
    emoji: "üçÑ",
    img: "images/bun-moc.jpg",
    audio: "audio/bun-moc.mp3"
  },
  {
    id: "com-hen",
    vi: "C∆°m h·∫øn",
    en: "Baby Clam Rice",
    pron: "kum hen",
    region: "Central",
    cities: ["Hue"],
    types: ["Rice", "Seafood", "Clam"],
    ingredients: ["cold rice", "tiny baby clams", "pork skin", "fried peanuts", "sesame", "banana blossom", "fresh herbs", "chili", "fermented shrimp paste", "lemongrass"],
    desc: "One of Hue's most beloved and unusual dishes ‚Äî cold leftover rice topped with tiny baby clams stir-fried in lemongrass, fermented shrimp paste, and chili. Loud, funky, and complex. Eaten for breakfast by locals on the Perfume River islands.",
    emoji: "üêö",
    img: "images/com-hen.jpg",
    audio: "audio/com-hen.mp3"
  },
  {
    id: "bun-hen",
    vi: "B√∫n h·∫øn",
    en: "Baby Clam Noodles",
    pron: "boon hen",
    region: "Central",
    cities: ["Hue"],
    types: ["Noodles", "Seafood", "Clam"],
    ingredients: ["thin rice vermicelli", "tiny baby clams", "lemongrass", "fermented shrimp paste", "chili", "peanuts", "banana blossom", "fresh herbs", "bean sprouts"],
    desc: "The noodle version of c∆°m h·∫øn ‚Äî same intensely flavored baby clam topping (lemongrass, shrimp paste, chili) but served over thin vermicelli instead of cold rice. A Hue specialty that Jodi sought out on her third day in the city.",
    emoji: "ü¶™",
    img: "images/bun-hen.jpg",
    audio: "audio/bun-hen.mp3"
  },
  {
    id: "nem-lui",
    vi: "Nem lui",
    en: "Lemongrass Pork Skewers",
    pron: "nem loo-ee",
    region: "Central",
    cities: ["Hue"],
    types: ["Grilled", "Pork", "Skewer"],
    ingredients: ["minced pork", "lemongrass stalks", "garlic", "shallots", "chili", "rice paper", "fresh herbs", "star fruit", "green banana", "hoisin peanut sauce"],
    desc: "Pork seasoned with garlic and lemongrass, moulded around lemongrass stalks and grilled over charcoal. Wrap in rice paper with fresh herbs, star fruit slices, and green banana. The lemongrass skewer perfumes the meat as it cooks.",
    emoji: "üç¢",
    img: "images/nem-lui.jpg",
    audio: "audio/nem-lui.mp3"
  },
  {
    id: "banh-trang-nuong",
    vi: "B√°nh tr√°ng n∆∞·ªõng",
    en: "Vietnamese Rice Pizza",
    pron: "bahn trang noong",
    region: "Central",
    cities: ["Da Lat", "Hue"],
    types: ["Street Food", "Snack", "Egg"],
    ingredients: ["rice paper", "egg", "dried shrimp", "spring onions", "pork floss", "chili sauce", "mayonnaise", "quail egg"],
    desc: "Street vendors grill a rice paper cracker over coals, crack an egg on top, scatter dried shrimp, spring onions and pork floss. The result is a crispy 'pizza' ‚Äî crunchy, eggy, savory, and impossible to stop eating. A Da Lat icon.",
    emoji: "üçï",
    img: "images/banh-trang-nuong.jpg",
    audio: "audio/banh-trang-nuong.mp3"
  },
  {
    id: "banh-ep",
    vi: "B√°nh √©p",
    en: "Pressed Rice Pancake",
    pron: "bahn ep",
    region: "Central",
    cities: ["Hue"],
    types: ["Street Food", "Snack", "Pork"],
    ingredients: ["thin rice pancake", "pork belly", "quail egg", "dried shrimp", "spring onion", "soy sauce", "chili"],
    desc: "A Hue street snack that stopped Jodi before she even made it into the Old City gates. A thin rice wafer pressed flat on a hot iron griddle with pork, egg, and dried shrimp until crispy. Eaten folded, straight from the griddle.",
    emoji: "ü´ì",
    img: "images/banh-ep.jpg",
    audio: "audio/banh-ep.mp3"
  },
  {
    id: "banh-khoai",
    vi: "B√°nh kho√°i",
    en: "Hue Crispy Pancake",
    pron: "bahn khwhy",
    region: "Central",
    cities: ["Hue"],
    types: ["Pancake", "Shrimp", "Pork"],
    ingredients: ["rice flour batter", "egg", "shrimp", "pork", "bean sprouts", "star fruit", "green banana", "peanut sesame dipping sauce"],
    desc: "A Hue specialty highlighted by Legal Nomads. Similar to b√°nh x√®o but thicker and crispier, stuffed with shrimp and pork, and served with a rich peanut-sesame dipping sauce plus tart fruit and herbs.",
    emoji: "ü•û",
    img: "images/banh-khoai.jpg",
    audio: "audio/banh-khoai.mp3"
  },
  {
    id: "banh-trang-trung",
    vi: "B√°nh tr√°ng tr·ª©ng",
    en: "Egg Rice Paper",
    pron: "bahn trang troong",
    region: "Central",
    cities: ["Hue"],
    types: ["Street Food", "Snack", "Egg"],
    ingredients: ["rice paper", "egg", "dried shrimp", "scallions", "chili sauce", "crispy shallots"],
    desc: "The Hue street version called out by Legal Nomads: rice paper grilled over charcoal with egg and toppings until crackly and savory. Fast, cheap, and perfect as a walking snack.",
    emoji: "üç≥",
    img: "images/banh-trang-trung.jpg",
    audio: "audio/banh-trang-trung.mp3"
  },
  {
    id: "banh-da-xuc-hen",
    vi: "B√°nh ƒëa x√∫c h·∫øn",
    en: "Clams with Sesame Cracker",
    pron: "bahn dah sook hen",
    region: "Central",
    cities: ["Hue"],
    types: ["Snack", "Seafood", "Clam"],
    ingredients: ["toasted sesame rice cracker", "baby clams", "lemongrass", "shrimp paste", "chili", "peanuts", "herbs"],
    desc: "Legal Nomads notes this as a favorite Hue bite: intensely seasoned baby clams scooped with giant toasted sesame crackers. Crunchy, briny, spicy, and very local.",
    emoji: "ü¶™",
    img: "images/banh-da-xuc-hen.jpg",
    audio: "audio/banh-da-xuc-hen.mp3"
  },
  {
    id: "banh-tam-bi",
    vi: "B√°nh t·∫±m b√¨",
    en: "Silkworm Noodles with Pork Skin",
    pron: "bahn tahm bee",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Noodles", "Pork", "Coconut"],
    ingredients: ["thick rice noodles", "shredded pork skin", "coconut cream sauce", "pickled vegetables", "herbs", "roasted rice powder"],
    desc: "A Saigon and Mekong specialty from Legal Nomads: short thick rice noodles topped with pork skin and a rich coconut sauce. Served with herbs and pickles for balance.",
    emoji: "ü•¢",
    img: "images/banh-tam-bi.jpg",
    audio: "audio/banh-tam-bi.mp3"
  },
  {
    id: "com-suon",
    vi: "C∆°m s∆∞·ªùn",
    en: "Rice with Grilled Pork Chop",
    pron: "kum swoon",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Rice", "Pork", "Grilled"],
    ingredients: ["broken or jasmine rice", "grilled pork chop", "fish sauce", "pickled carrot", "scallion oil", "fried egg"],
    desc: "Legal Nomads flags this as a core Saigon meal: smoky marinated pork chop over rice, usually with pickles and scallion oil. Straightforward, satisfying, and everywhere.",
    emoji: "üçñ",
    img: "images/com-suon.jpg",
    audio: "audio/com-suon.mp3"
  },
  {
    id: "canh-kho-qua-nhoi-thit",
    vi: "Canh kh·ªï qua nh·ªìi th·ªãt",
    en: "Stuffed Bitter Melon Soup",
    pron: "kahn kor kwah nhoy tit",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Soup", "Pork", "Comfort Food"],
    ingredients: ["bitter melon", "minced pork", "glass noodles", "wood ear mushrooms", "green onions", "clear broth"],
    desc: "A classic home-style dish featured by Legal Nomads in Saigon food coverage: bitter melon stuffed with seasoned pork in a clear broth. Slightly bitter, deeply savory, and often eaten at family meals.",
    emoji: "ü•¨",
    img: "images/canh-kho-qua-nhoi-thit.jpg",
    audio: "audio/canh-kho-qua-nhoi-thit.mp3"
  },
  {
    id: "che-chuoi",
    vi: "Ch√® chu·ªëi",
    en: "Banana Tapioca Dessert",
    pron: "chay chwoo-ee",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Dessert", "Sweet", "Coconut"],
    ingredients: ["banana", "tapioca pearls", "coconut milk", "pandan", "sesame seeds", "peanuts"],
    desc: "Called out by Legal Nomads as a standout dessert in Saigon: warm bananas simmered in coconut milk with chewy tapioca pearls. Sweet, creamy, and fragrant.",
    emoji: "üçå",
    img: "images/che-chuoi.jpg",
    audio: "audio/che-chuoi.mp3"
  },
  {
    id: "cuon-diep",
    vi: "Cu·ªën ƒëi·ªáp",
    en: "Mustard Leaf Rolls",
    pron: "koon yep",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Spring Roll", "Noodles", "Snack"],
    ingredients: ["mustard leaves", "rice vermicelli", "tofu", "mushrooms", "sweet peanut sauce"],
    desc: "From Legal Nomads' Saigon city food guide: mustard leaves rolled around vermicelli, tofu, and mushrooms, served with sweet peanut sauce. A light but satisfying vegetarian street-food bite.",
    emoji: "ü•¨",
    img: "images/cuon-diep.jpg",
    audio: "audio/cuon-diep.mp3"
  },
  {
    id: "banh-canh",
    vi: "B√°nh canh",
    en: "Thick Tapioca Noodle Soup",
    pron: "bahn kahn",
    region: "South",
    cities: ["Ho Chi Minh", "Hue"],
    types: ["Noodle Soup", "Noodles", "Pork"],
    ingredients: ["thick tapioca noodles", "pork or seafood broth", "fish cake", "scallions", "fried shallots"],
    desc: "Mentioned in Legal Nomads' Vietnam city food pages. Thick, chewy noodles in a savory broth; versions vary by city and protein.",
    emoji: "üçú",
    img: "images/banh-canh.jpg",
    audio: "audio/banh-canh.mp3"
  },
  {
    id: "canh-cua",
    vi: "Canh cua",
    en: "Crab Soup",
    pron: "kahn koo-ah",
    region: "North",
    cities: ["Hanoi"],
    types: ["Soup", "Crab", "Seafood"],
    ingredients: ["fresh crab paste", "leafy greens", "taro stems", "broth", "seasonings"],
    desc: "Referenced in Legal Nomads' Vietnam gluten-free guide. A light Vietnamese crab soup often served with greens and rice.",
    emoji: "ü¶Ä",
    img: "images/canh-cua.jpg",
    audio: "audio/canh-cua.mp3"
  },
  {
    id: "nem-ran",
    vi: "Nem r√°n",
    en: "Northern Fried Spring Rolls",
    pron: "nem rahn",
    region: "North",
    cities: ["Hanoi"],
    types: ["Spring Roll", "Fried", "Pork"],
    ingredients: ["rice paper", "pork", "mushrooms", "glass noodles", "carrot", "fish sauce"],
    desc: "Called out in Legal Nomads' Vietnam food coverage. The northern style of fried spring rolls, close cousin to southern ch·∫£ gi√≤.",
    emoji: "ü•ü",
    img: "images/nem-ran.jpg",
    audio: "audio/nem-ran.mp3"
  },
  {
    id: "banh-trang-cuon",
    vi: "B√°nh tr√°ng cu·ªën",
    en: "Rice Paper Rolls",
    pron: "bahn trang koon",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Street Food", "Snack", "Spring Roll"],
    ingredients: ["rice paper", "herbs", "pickled vegetables", "protein filling", "dipping sauce"],
    desc: "Featured in Legal Nomads' Saigon writing. Soft rice paper rolled with fresh fillings and eaten as a quick street snack.",
    emoji: "üåØ",
    img: "images/banh-trang-cuon.jpg",
    audio: "audio/banh-trang-cuon.mp3"
  },
  {
    id: "banh-chung",
    vi: "B√°nh ch∆∞ng",
    en: "Square Sticky Rice Cake",
    pron: "bahn choong",
    region: "North",
    cities: ["Hanoi"],
    types: ["Rice", "Pork", "Snack"],
    ingredients: ["glutinous rice", "mung beans", "pork", "dong leaves", "black pepper"],
    desc: "Mentioned in Legal Nomads' Saigon/Vietnam posts. A traditional Tet rice cake, square-shaped and wrapped in green leaves.",
    emoji: "üü©",
    img: "images/banh-chung.jpg",
    audio: "audio/banh-chung.mp3"
  },
  {
    id: "banh-gio",
    vi: "B√°nh gi√≤",
    en: "Steamed Pyramid Rice Dumpling",
    pron: "bahn yaw",
    region: "North",
    cities: ["Hanoi"],
    types: ["Steamed", "Snack", "Pork"],
    ingredients: ["rice flour dough", "minced pork", "wood ear mushroom", "banana leaf"],
    desc: "Called out in Legal Nomads' Vietnam content. A soft, savory steamed dumpling wrapped in banana leaf and eaten warm.",
    emoji: "ü´î",
    img: "images/banh-gio.jpg",
    audio: "audio/banh-gio.mp3"
  },
  {
    id: "hu-tieu-nam-vang",
    vi: "H·ªß ti·∫øu Nam Vang",
    en: "Phnom Penh-Style Hu Tieu",
    pron: "hoo tee-ow nahm vahng",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Noodle Soup", "Noodles", "Pork"],
    ingredients: ["rice noodles", "pork broth", "shrimp", "minced pork", "quail eggs", "garlic chives"],
    desc: "Explicitly listed on Legal Nomads' Saigon guide. The Phnom Penh-influenced h·ªß ti·∫øu style, served dry or with broth.",
    emoji: "üç≤",
    img: "images/hu-tieu-nam-vang.jpg",
    audio: "audio/hu-tieu-nam-vang.mp3"
  },
  {
    id: "hu-tieu-my-tho",
    vi: "H·ªß ti·∫øu M·ªπ Tho",
    en: "My Tho Hu Tieu",
    pron: "hoo tee-ow mee taw",
    region: "South",
    cities: ["My Tho", "Ho Chi Minh"],
    types: ["Noodle Soup", "Noodles", "Pork"],
    ingredients: ["rice noodles", "clear broth", "pork", "seafood", "chives", "fried shallots"],
    desc: "Also listed in Legal Nomads' Saigon guide. A southern Mekong-style h·ªß ti·∫øu known for springy noodles and light broth.",
    emoji: "üçú",
    img: "images/hu-tieu-my-tho.jpg",
    audio: "audio/hu-tieu-my-tho.mp3"
  },
  {
    id: "banh-da-cua",
    vi: "B√°nh ƒëa cua",
    en: "Crab Red Noodle Soup",
    pron: "bahn da koo-ah",
    region: "North",
    cities: ["Hai Phong"],
    types: ["Noodle Soup", "Crab", "Seafood"],
    ingredients: ["red rice noodles", "crab broth", "water spinach", "fried shallots", "cha la lot"],
    desc: "A Hai Phong specialty with chewy red noodles and a sweet-savory crab broth. Commonly ordered at dedicated noodle shops.",
    emoji: "ü¶Ä",
    img: "images/banh-da-cua.jpg",
    audio: "audio/banh-da-cua.mp3"
  },
  {
    id: "banh-hoi",
    vi: "B√°nh h·ªèi",
    en: "Woven Rice Vermicelli",
    pron: "bahn hoy",
    region: "Central",
    cities: ["Quy Nhon"],
    types: ["Noodles", "Pork", "Snack"],
    ingredients: ["woven vermicelli sheets", "scallion oil", "grilled pork", "herbs", "fish sauce"],
    desc: "Fine woven rice noodles brushed with scallion oil, often served with grilled pork and herbs.",
    emoji: "üçú",
    img: "images/banh-hoi.jpg",
    audio: "audio/banh-hoi.mp3"
  },
  {
    id: "bun-dau-mam-tom",
    vi: "B√∫n ƒë·∫≠u m·∫Øm t√¥m",
    en: "Vermicelli, Tofu & Shrimp Paste",
    pron: "boon dow mum tome",
    region: "North",
    cities: ["Hanoi"],
    types: ["Noodles", "Tofu", "Street Food"],
    ingredients: ["rice vermicelli", "fried tofu", "fermented shrimp paste", "pork", "herbs", "cucumber"],
    desc: "A classic Hanoi tray: tofu, noodles, herbs, and pungent m·∫Øm t√¥m. Widely available at casual restaurants.",
    emoji: "üçΩÔ∏è",
    img: "images/bun-dau-mam-tom.jpg",
    audio: "audio/bun-dau-mam-tom.mp3"
  },
  {
    id: "bun-oc",
    vi: "B√∫n ·ªëc",
    en: "Snail Noodle Soup",
    pron: "boon oke",
    region: "North",
    cities: ["Hanoi"],
    types: ["Noodle Soup", "Seafood", "Shellfish"],
    ingredients: ["rice vermicelli", "snails", "tomato broth", "vinegar", "herbs", "chili"],
    desc: "Tangy tomato-based noodle soup with snails, a staple breakfast and lunch dish in Hanoi.",
    emoji: "üêö",
    img: "images/bun-oc.jpg",
    audio: "audio/bun-oc.mp3"
  },
  {
    id: "bun-thang",
    vi: "B√∫n thang",
    en: "Hanoi Chicken & Egg Noodles",
    pron: "boon thung",
    region: "North",
    cities: ["Hanoi"],
    types: ["Noodle Soup", "Chicken", "Noodles"],
    ingredients: ["rice vermicelli", "chicken", "egg ribbons", "pork floss", "clear broth", "herbs"],
    desc: "A refined Hanoi noodle bowl layered with shredded toppings and clear aromatic broth.",
    emoji: "üç≤",
    img: "images/bun-thang.jpg",
    audio: "audio/bun-thang.mp3"
  },
  {
    id: "banh-bot-loc",
    vi: "B√°nh b·ªôt l·ªçc",
    en: "Tapioca Shrimp Dumplings",
    pron: "bahn bot lock",
    region: "Central",
    cities: ["Hue"],
    types: ["Snack", "Shrimp", "Steamed"],
    ingredients: ["tapioca dough", "shrimp", "pork belly", "fried shallots", "fish sauce"],
    desc: "Chewy translucent dumplings filled with shrimp and pork, often wrapped in banana leaf in Hue.",
    emoji: "ü•ü",
    img: "images/banh-bot-loc.jpg",
    audio: "audio/banh-bot-loc.mp3"
  },
  {
    id: "banh-uot",
    vi: "B√°nh ∆∞·ªõt",
    en: "Wet Rice Sheets",
    pron: "bahn oot",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Rice Roll", "Pork", "Steamed"],
    ingredients: ["steamed rice sheets", "pork", "bean sprouts", "fried shallots", "fish sauce"],
    desc: "Thin steamed rice sheets served fresh, often with pork and herbs. Popular breakfast choice.",
    emoji: "ü´î",
    img: "images/banh-uot.jpg",
    audio: "audio/banh-uot.mp3"
  },
  {
    id: "banh-can",
    vi: "B√°nh cƒÉn",
    en: "Mini Rice Pancakes",
    pron: "bahn can",
    region: "Central",
    cities: ["Nha Trang"],
    types: ["Pancake", "Street Food", "Egg"],
    ingredients: ["rice batter", "quail egg", "scallions", "fish sauce", "green mango"],
    desc: "Small cup-cooked rice pancakes, usually topped with egg or seafood and eaten with dipping sauce.",
    emoji: "ü•û",
    img: "images/banh-can.jpg",
    audio: "audio/banh-can.mp3"
  },
  {
    id: "banh-duc",
    vi: "B√°nh ƒë√∫c",
    en: "Savory Rice Cake",
    pron: "bahn duke",
    region: "North",
    cities: ["Hanoi"],
    types: ["Snack", "Rice", "Steamed"],
    ingredients: ["rice flour cake", "minced pork", "wood ear mushroom", "fried shallots", "fish sauce"],
    desc: "Soft savory rice cake topped with minced pork and sauce; a common market and street snack.",
    emoji: "üçò",
    img: "images/banh-duc.jpg",
    audio: "audio/banh-duc.mp3"
  },
  {
    id: "goi-ca",
    vi: "G·ªèi c√°",
    en: "Fish Salad",
    pron: "goy kah",
    region: "Central",
    cities: ["Da Nang"],
    types: ["Salad", "Fish", "Seafood"],
    ingredients: ["fresh fish", "toasted rice powder", "herbs", "banana blossom", "sesame sauce"],
    desc: "Regional fish salad with herbs and rice crackers; often ordered as a shared starter.",
    emoji: "üêü",
    img: "images/goi-ca.jpg",
    audio: "audio/goi-ca.mp3"
  },
  {
    id: "bo-kho",
    vi: "B√≤ kho",
    en: "Vietnamese Beef Stew",
    pron: "baw kaw",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Beef", "Soup", "Comfort Food"],
    ingredients: ["beef shank", "carrot", "lemongrass", "star anise", "tomato paste", "baguette"],
    desc: "Rich beef stew with lemongrass and spices, commonly eaten with bread or noodles.",
    emoji: "ü•ò",
    img: "images/bo-kho.jpg",
    audio: "audio/bo-kho.mp3"
  },
  {
    id: "thit-kho-tau",
    vi: "Th·ªãt kho t√†u",
    en: "Braised Pork & Eggs",
    pron: "tit kaw tao",
    region: "South",
    cities: ["Can Tho"],
    types: ["Pork", "Stew", "Comfort Food"],
    ingredients: ["pork belly", "eggs", "coconut water", "fish sauce", "caramelized sugar"],
    desc: "Home-style braised pork with eggs in coconut water. Common in family-run eateries.",
    emoji: "üçñ",
    img: "images/thit-kho-tau.jpg",
    audio: "audio/thit-kho-tau.mp3"
  },
  {
    id: "chao-long",
    vi: "Ch√°o l√≤ng",
    en: "Pork Offal Congee",
    pron: "chow long",
    region: "North",
    cities: ["Hanoi"],
    types: ["Porridge", "Pork", "Comfort Food"],
    ingredients: ["rice porridge", "pork offal", "blood pudding", "ginger", "scallions"],
    desc: "Savory congee with assorted pork cuts and offal, a classic local breakfast dish.",
    emoji: "üç≤",
    img: "images/chao-long.jpg",
    audio: "audio/chao-long.mp3"
  },
  {
    id: "lau",
    vi: "L·∫©u",
    en: "Vietnamese Hot Pot",
    pron: "lao",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Hot Pot", "Soup", "Shared"],
    ingredients: ["broth", "meat or seafood", "leafy greens", "mushrooms", "noodles", "tofu"],
    desc: "Tabletop hot pot for sharing, with many regional broth styles and ingredient sets.",
    emoji: "üç≤",
    img: "images/lau.jpg",
    audio: "audio/lau.mp3"
  },
  {
    id: "xoi-ga",
    vi: "X√¥i g√†",
    en: "Sticky Rice with Chicken",
    pron: "soy gah",
    region: "North",
    cities: ["Hanoi"],
    types: ["Rice", "Chicken", "Comfort Food"],
    ingredients: ["sticky rice", "chicken", "fried shallots", "scallion oil", "soy sauce"],
    desc: "Glutinous rice topped with chicken, sold at breakfast carts and casual diners.",
    emoji: "üçö",
    img: "images/xoi-ga.jpg",
    audio: "audio/xoi-ga.mp3"
  },
  {
    id: "com-chien",
    vi: "C∆°m chi√™n",
    en: "Fried Rice",
    pron: "kum chien",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Rice", "Fried", "Pork"],
    ingredients: ["rice", "egg", "vegetables", "pork or seafood", "soy sauce", "scallions"],
    desc: "Vietnamese fried rice found everywhere from family restaurants to street stalls.",
    emoji: "üçõ",
    img: "images/com-chien.jpg",
    audio: "audio/com-chien.mp3"
  },
  {
    id: "com-ga-quang-nam",
    vi: "C∆°m g√† Qu·∫£ng Nam",
    en: "Quang Nam Chicken Rice",
    pron: "kum gah kwang nahm",
    region: "Central",
    cities: ["Hoi An"],
    types: ["Rice", "Chicken", "Comfort Food"],
    ingredients: ["turmeric rice", "shredded chicken", "herbs", "onion", "chili sauce"],
    desc: "Central Vietnam chicken rice, fragrant and savory, commonly served at lunch spots.",
    emoji: "üçó",
    img: "images/com-ga-quang-nam.jpg",
    audio: "audio/com-ga-quang-nam.mp3"
  },
  {
    id: "sup-mang-cua",
    vi: "S√∫p mƒÉng cua",
    en: "Crab Asparagus Soup",
    pron: "soop mang koo-ah",
    region: "South",
    cities: ["Ho Chi Minh"],
    types: ["Soup", "Crab", "Seafood"],
    ingredients: ["crab meat", "asparagus", "egg white", "starch thickener", "cilantro"],
    desc: "Light thickened crab soup often served as a starter at Vietnamese restaurants.",
    emoji: "ü•£",
    img: "images/sup-mang-cua.jpg",
    audio: "audio/sup-mang-cua.mp3"
  },
  {
    id: "bun-ca",
    vi: "B√∫n c√°",
    en: "Fish Noodle Soup",
    pron: "boon kah",
    region: "North",
    cities: ["Hanoi"],
    types: ["Noodle Soup", "Fish", "Seafood"],
    ingredients: ["rice vermicelli", "fish", "tomato broth", "dill", "spring onions"],
    desc: "Fish-based noodle soup, especially popular in northern Vietnam.",
    emoji: "üêü",
    img: "images/bun-ca.jpg",
    audio: "audio/bun-ca.mp3"
  },
  {
    id: "bun-cha-ca",
    vi: "B√∫n ch·∫£ c√°",
    en: "Fish Cake Noodle Soup",
    pron: "boon cha kah",
    region: "Central",
    cities: ["Da Nang"],
    types: ["Noodle Soup", "Fish", "Seafood"],
    ingredients: ["rice noodles", "fish cakes", "pineapple", "tomato", "herbs", "chili"],
    desc: "Da Nang style noodle soup with fish cakes and sweet-sour broth notes.",
    emoji: "üçú",
    img: "images/bun-cha-ca.jpg",
    audio: "audio/bun-cha-ca.mp3"
  }
];

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// FILTER CONFIG
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const filterGroups = {
  all: [],
  region: [
    { key: "North",   label: "üßß North",   icon: "üßß" },
    { key: "Central", label: "üå∏ Central",  icon: "üå∏" },
    { key: "South",   label: "üå¥ South",    icon: "üå¥" }
  ],
  city: [
    { key: "Hanoi",         label: "üèõ Hanoi",         icon: "üèõ" },
    { key: "Ho Chi Minh",   label: "üåÜ Saigon",        icon: "üåÜ" },
    { key: "Hue",           label: "üèØ Hue",           icon: "üèØ" },
    { key: "Hoi An",        label: "üèÆ Hoi An",        icon: "üèÆ" },
    { key: "Da Nang",       label: "üåä Da Nang",       icon: "üåä" },
    { key: "Vung Tau",      label: "‚õ± Vung Tau",      icon: "‚õ±" },
    { key: "Can Tho",       label: "üö§ Can Tho",       icon: "üö§" },
    { key: "Da Lat",        label: "üåø Da Lat",        icon: "üåø" },
    { key: "My Tho",        label: "üõ∂ My Tho",        icon: "üõ∂" },
    { key: "Hai Phong",     label: "‚öì Hai Phong",      icon: "‚öì" },
    { key: "Quy Nhon",      label: "üèñ Quy Nhon",       icon: "üèñ" },
    { key: "Nha Trang",     label: "üå¥ Nha Trang",      icon: "üå¥" }
  ],
  type: [
    { key: "Noodle Soup", label: "üçú Noodle Soup", icon: "üçú" },
    { key: "Noodles",     label: "üçù Noodles",     icon: "üçù" },
    { key: "Rice",        label: "üçö Rice",         icon: "üçö" },
    { key: "Spring Roll", label: "üåØ Spring Roll",  icon: "üåØ" },
    { key: "Grilled",     label: "üî• Grilled",      icon: "üî•" },
    { key: "Shrimp",      label: "ü¶ê Shrimp",       icon: "ü¶ê" },
    { key: "Beef",        label: "ü•© Beef",         icon: "ü•©" },
    { key: "Pork",        label: "üê∑ Pork",         icon: "üê∑" },
    { key: "Seafood",     label: "ü¶û Seafood",      icon: "ü¶û" },
    { key: "Crab",        label: "ü¶Ä Crab",         icon: "ü¶Ä" },
    { key: "Spicy",       label: "üå∂ Spicy",        icon: "üå∂" },
    { key: "Dessert",     label: "üçÆ Dessert",      icon: "üçÆ" },
    { key: "Comfort Food",label: "ü´Ç Comfort",      icon: "ü´Ç" },
    { key: "Skewer",      label: "üç¢ Skewer",       icon: "üç¢" },
    { key: "Snack",       label: "üçø Snack",         icon: "üçø" },
    { key: "Mushroom",    label: "üçÑ Mushroom",      icon: "üçÑ" },
    { key: "Clam",        label: "ü¶™ Clam",          icon: "ü¶™" }
  ]
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PHRASE DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const phrases = [
  // ‚îÄ‚îÄ ORDERING ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  { id:"cho-toi-mot-to",    vi:"Cho t√¥i m·ªôt t√¥",     en:"One bowl, please",          pron:"chaw toy moat toh",  category:"Ordering"   },
  { id:"cho-toi-cai-nay",   vi:"Cho t√¥i c√°i n√†y",    en:"I'll have that one",        pron:"chaw toy kai nay",   category:"Ordering"   },
  { id:"khong-cay",         vi:"Kh√¥ng cay",           en:"Not spicy",                 pron:"khong kai",          category:"Ordering"   },
  { id:"cay-it-thoi",       vi:"Cay √≠t th√¥i",         en:"Just a little spicy",       pron:"kai it thoy",        category:"Ordering"   },
  { id:"cho-them-rau",      vi:"Cho th√™m rau",        en:"More herbs, please",        pron:"chaw tem rao",       category:"Ordering"   },
  { id:"de-mang-ve",        vi:"ƒê·ªÉ mang v·ªÅ",          en:"To take away",              pron:"deh mang veh",       category:"Ordering"   },
  // ‚îÄ‚îÄ PAYING ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  { id:"bao-nhieu-tien",    vi:"Bao nhi√™u ti·ªÅn?",     en:"How much?",                 pron:"bow nyew tyen",      category:"Paying"     },
  { id:"tinh-tien",         vi:"T√≠nh ti·ªÅn",           en:"Check, please",             pron:"ting tyen",          category:"Paying"     },
  { id:"dat-qua",           vi:"ƒê·∫Øt qu√°",             en:"Too expensive!",            pron:"dat kwah",           category:"Paying"     },
  // ‚îÄ‚îÄ DIETARY ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  { id:"khong-thit-heo",    vi:"Kh√¥ng th·ªãt heo",      en:"No pork",                   pron:"khong tit hay-oh",   category:"Dietary"    },
  { id:"khong-hai-san",     vi:"Kh√¥ng h·∫£i s·∫£n",       en:"No seafood",                pron:"khong hai san",      category:"Dietary"    },
  { id:"toi-an-chay",       vi:"T√¥i ƒÉn chay",         en:"I'm vegetarian",            pron:"toy an chai",        category:"Dietary"    },
  { id:"toi-bi-di-ung",     vi:"T√¥i b·ªã d·ªã ·ª©ng",       en:"I have an allergy",         pron:"toy bee zee oong",   category:"Dietary"    },
  // ‚îÄ‚îÄ COMPLIMENTS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  { id:"ngon-lam",          vi:"Ngon l·∫Øm!",           en:"Delicious!",                pron:"ngon lum",           category:"Compliments"},
  { id:"ngon-qua",          vi:"Ngon qu√°!",           en:"So good!",                  pron:"ngon kwah",          category:"Compliments"},
  { id:"tuyet-voi",         vi:"Tuy·ªát v·ªùi!",          en:"Amazing!",                  pron:"twyet voy",          category:"Compliments"},
  // ‚îÄ‚îÄ BASICS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  { id:"xin-chao",          vi:"Xin ch√†o",            en:"Hello",                     pron:"sin chow",           category:"Basics"     },
  { id:"cam-on",            vi:"C·∫£m ∆°n",              en:"Thank you",                 pron:"gahm un",            category:"Basics"     },
  { id:"xin-loi",           vi:"Xin l·ªói",             en:"Excuse me / Sorry",         pron:"sin loy",            category:"Basics"     },
  { id:"khong-hieu",        vi:"Kh√¥ng hi·ªÉu",          en:"I don't understand",        pron:"khong hyew",         category:"Basics"     },
];

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// STATE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let activeGroup = "all";
let activeFilter = null;
let currentDish = null;
let currentAudio = null;
let sheetPlaying = false;
let searchQuery = "";
let currentMode = "dishes"; // "dishes" | "phrases"
let playingPhraseId = null;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// AUDIO
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function playDish(dish, fromSheet = false) {
  // Stop any current audio
  stopAudio();

  const bar = document.getElementById("nowPlayingBar");
  const barText = document.getElementById("nowPlayingText");

  // Try file first, fallback to Web Speech API
  const audio = new Audio(dish.audio);
  audio.volume = 1.0;

  audio.addEventListener("canplaythrough", () => {
    currentAudio = audio;
    audio.play().catch(() => speakFallback(dish, fromSheet));
    showNowPlaying(dish.vi);
    if (fromSheet) setSheetPlaying(true);
  });

  audio.addEventListener("ended", () => {
    hideNowPlaying();
    if (fromSheet) setSheetPlaying(false);
    updateCardBadge(dish.id, false);
    currentAudio = null;
  });

  audio.addEventListener("error", () => {
    // File not found ‚Üí use Web Speech API
    speakFallback(dish, fromSheet);
  });

  // Set a short timeout: if audio doesn't load quickly, fallback
  setTimeout(() => {
    if (audio.readyState < 3) {
      audio.onerror = null;
      audio.oncanplaythrough = null;
      speakFallback(dish, fromSheet);
    }
  }, 800);

  updateCardBadge(dish.id, true);
}

function speakFallback(dish, fromSheet = false) {
  if (!window.speechSynthesis) return;

  const utter = new SpeechSynthesisUtterance(dish.vi);
  utter.lang = "vi-VN";
  utter.rate = 0.85;
  utter.pitch = 1.0;
  utter.volume = 1.0;

  // Try to find a Vietnamese voice
  const voices = speechSynthesis.getVoices();
  const viVoice = voices.find(v => v.lang.startsWith("vi")) ||
                  voices.find(v => v.lang.startsWith("vi-VN"));
  if (viVoice) utter.voice = viVoice;

  utter.onstart = () => {
    showNowPlaying(dish.vi);
    if (fromSheet) setSheetPlaying(true);
  };

  utter.onend = () => {
    hideNowPlaying();
    if (fromSheet) setSheetPlaying(false);
    updateCardBadge(dish.id, false);
  };

  utter.onerror = () => {
    hideNowPlaying();
    if (fromSheet) setSheetPlaying(false);
    updateCardBadge(dish.id, false);
  };

  speechSynthesis.speak(utter);
}

function stopAudio() {
  if (currentAudio) {
    currentAudio.pause();
    currentAudio = null;
  }
  if (window.speechSynthesis) {
    speechSynthesis.cancel();
  }
  hideNowPlaying();
  setSheetPlaying(false);
  // Clear all card badges
  document.querySelectorAll(".play-badge.playing").forEach(b => b.classList.remove("playing"));
}

function updateCardBadge(id, playing) {
  const card = document.querySelector(`[data-id="${id}"] .play-badge`);
  if (card) card.classList.toggle("playing", playing);
}

function showNowPlaying(text) {
  const bar = document.getElementById("nowPlayingBar");
  document.getElementById("nowPlayingText").textContent = text;
  bar.classList.add("visible");
}

function hideNowPlaying() {
  document.getElementById("nowPlayingBar").classList.remove("visible");
}

function setSheetPlaying(playing) {
  sheetPlaying = playing;
  const btn = document.getElementById("sheetSpeakBtn");
  if (!btn) return;
  btn.classList.toggle("playing", playing);
  btn.innerHTML = playing
    ? `<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="white"><rect x="6" y="6" width="12" height="12" rx="2"/></svg>`
    : `<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" fill="white"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`;
}

function speakFromSheet() {
  if (sheetPlaying) {
    stopAudio();
  } else if (currentDish) {
    playDish(currentDish, true);
  }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MODE SWITCHING
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function setMode(mode) {
  currentMode = mode;
  document.querySelectorAll(".mode-tab").forEach(t =>
    t.classList.toggle("active", t.dataset.mode === mode)
  );
  const isDishes = mode === "dishes";
  document.getElementById("dishControls").style.display = isDishes ? "" : "none";
  document.getElementById("resultsLabel").style.display = isDishes ? "" : "none";
  document.getElementById("grid").style.display = isDishes ? "" : "none";
  document.getElementById("phraseGrid").style.display = isDishes ? "none" : "block";
  if (isDishes) renderGrid();
  else renderPhrases();
  stopAudio();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SEARCH
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function onSearch(e) {
  searchQuery = e.target.value.toLowerCase();
  document.getElementById("searchClear").classList.toggle("visible", searchQuery.length > 0);
  renderGrid();
}

function clearSearch() {
  document.getElementById("searchInput").value = "";
  searchQuery = "";
  document.getElementById("searchClear").classList.remove("visible");
  document.getElementById("searchInput").focus();
  renderGrid();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PHRASE PLAYBACK
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function playPhrase(phrase) {
  stopAudio();
  playingPhraseId = phrase.id;
  document.querySelectorAll(".phrase-card").forEach(c =>
    c.classList.toggle("playing", c.dataset.id === phrase.id)
  );

  const audio = new Audio(`audio/phrases/${phrase.id}.mp3`);
  audio.volume = 1.0;
  audio.addEventListener("canplaythrough", () => {
    currentAudio = audio;
    audio.play().catch(() => phraseSpeakFallback(phrase));
    showNowPlaying(phrase.vi);
  });
  audio.addEventListener("ended", () => {
    currentAudio = null;
    playingPhraseId = null;
    hideNowPlaying();
    document.querySelectorAll(".phrase-card").forEach(c => c.classList.remove("playing"));
  });
  audio.addEventListener("error", () => phraseSpeakFallback(phrase));
  setTimeout(() => {
    if (audio.readyState < 3) { audio.onerror = null; phraseSpeakFallback(phrase); }
  }, 800);
}

function phraseSpeakFallback(phrase) {
  if (!window.speechSynthesis) return;
  const utter = new SpeechSynthesisUtterance(phrase.vi);
  utter.lang = "vi-VN"; utter.rate = 0.8; utter.volume = 1;
  utter.onstart = () => showNowPlaying(phrase.vi);
  utter.onend = () => {
    hideNowPlaying();
    playingPhraseId = null;
    document.querySelectorAll(".phrase-card").forEach(c => c.classList.remove("playing"));
  };
  speechSynthesis.speak(utter);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// PHRASE RENDERING
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const PHRASE_CATEGORIES = ["Ordering", "Paying", "Dietary", "Compliments", "Basics"];
const CATEGORY_EMOJI = { Ordering:"üõéÔ∏è", Paying:"üíµ", Dietary:"ü•ó", Compliments:"üòã", Basics:"üëã" };

function renderPhrases() {
  const grid = document.getElementById("phraseGrid");
  const speakerSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
    <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" fill="white"/>
    <path d="M15.54 8.46a5 5 0 0 1 0 7.07" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M19.07 4.93a10 10 0 0 1 0 14.14" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`;

  grid.innerHTML = PHRASE_CATEGORIES.map(cat => {
    const catPhrases = phrases.filter(p => p.category === cat);
    return `
      <div class="phrase-category-label">${CATEGORY_EMOJI[cat]} ${cat}</div>
      ${catPhrases.map(p => `
        <div class="phrase-card" data-id="${p.id}" onclick="playPhrase(phrases.find(x=>x.id==='${p.id}'))">
          <div class="phrase-text">
            <div class="phrase-vi">${p.vi}</div>
            <div class="phrase-en">${p.en}</div>
            <div class="phrase-pron">${p.pron}</div>
          </div>
          <div class="phrase-play">${speakerSVG}</div>
        </div>
      `).join("")}
    `;
  }).join("");
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// FILTER RENDERING
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderFilterTabs() {
  document.querySelectorAll(".filter-tab").forEach(tab => {
    tab.addEventListener("click", () => {
      activeGroup = tab.dataset.group;
      activeFilter = null;
      document.querySelectorAll(".filter-tab").forEach(t => t.classList.remove("active"));
      tab.classList.add("active");
      renderPills();
      renderGrid();
    });
  });
}

function renderPills() {
  const row = document.getElementById("pillsRow");
  row.innerHTML = "";

  if (activeGroup === "all") return;

  const pills = filterGroups[activeGroup];
  pills.forEach(p => {
    const btn = document.createElement("button");
    btn.className = "pill" + (activeFilter === p.key ? " active" : "");
    btn.innerHTML = `<span class="pill-icon">${p.icon}</span> ${p.key}`;
    btn.onclick = () => {
      activeFilter = activeFilter === p.key ? null : p.key;
      renderPills();
      renderGrid();
    };
    row.appendChild(btn);
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// GRID RENDERING
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function stripDiacritics(s) {
  return s.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
}

function getFilteredDishes() {
  let result = dishes;

  if (activeGroup !== "all" && activeFilter) {
    result = result.filter(d => {
      if (activeGroup === "region") return d.region === activeFilter;
      if (activeGroup === "city")   return d.cities.includes(activeFilter);
      if (activeGroup === "type")   return d.types.includes(activeFilter);
      return true;
    });
  }

  if (searchQuery) {
    const q = stripDiacritics(searchQuery);
    result = result.filter(d =>
      stripDiacritics(d.vi).includes(q) || d.en.toLowerCase().includes(q)
    );
  }

  return result;
}

function renderGrid() {
  const grid = document.getElementById("grid");
  const label = document.getElementById("resultsLabel");
  const countBadge = document.getElementById("dishCount");
  const filtered = getFilteredDishes();

  countBadge.textContent = filtered.length;

  if (filtered.length === 0) {
    const emptyMsg = searchQuery
      ? `No dishes match "<strong>${searchQuery}</strong>"`
      : "No dishes match this filter";
    label.innerHTML = emptyMsg;
    grid.innerHTML = `
      <div class="empty-state">
        <span class="emoji">ü•¢</span>
        <p>No dishes found.<br>Try a different search or filter!</p>
      </div>`;
    return;
  }

  let filterLabel = `All ${filtered.length} dishes`;
  if (searchQuery) filterLabel = `${filtered.length} result${filtered.length !== 1 ? "s" : ""} for "${searchQuery}"`;
  else if (activeFilter) filterLabel = `${filtered.length} ${activeFilter} dish${filtered.length !== 1 ? "es" : ""}`;
  label.textContent = `Showing ${filterLabel}`;

  grid.innerHTML = filtered.map(d => `
    <div class="card" data-id="${d.id}" onclick="openSheet('${d.id}')">
      <div class="card-img-wrap">
        <div class="img-placeholder">${d.emoji}</div>
        <img class="loading" src="${d.img}" alt="${d.en}"
          onload="this.classList.remove('loading');this.classList.add('loaded')"
          onerror="this.style.display='none'">
        <div class="play-badge" onclick="event.stopPropagation(); playDish(dishes.find(x=>x.id==='${d.id}'))">üîä</div>
      </div>
      <div class="card-body">
        <div class="card-vi">${d.vi}</div>
        <div class="card-en">${d.en}</div>
        <div class="card-tags">
          <span class="tag region">${d.region}</span>
          ${d.cities.map(c => `<span class="tag city">${c}</span>`).join("")}
        </div>
      </div>
    </div>
  `).join("");
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// DETAIL SHEET
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openSheet(id) {
  const dish = dishes.find(d => d.id === id);
  if (!dish) return;
  currentDish = dish;

  document.getElementById("sheetImg").src = dish.img;
  document.getElementById("sheetImg").alt = dish.en;
  document.getElementById("sheetImg").style.display = "";
  document.getElementById("sheetViName").textContent = dish.vi;
  document.getElementById("sheetEnName").textContent = dish.en;
  document.getElementById("sheetPronText").textContent = dish.pron;
  document.getElementById("sheetDesc").textContent = dish.desc;

  // Meta chips
  const meta = document.getElementById("sheetMeta");
  meta.innerHTML = `
    <span class="meta-chip region">üó∫ ${dish.region}</span>
    ${dish.cities.map(c => `<span class="meta-chip city">üìç ${c}</span>`).join("")}
    ${dish.types.map(t => `<span class="meta-chip type">${t}</span>`).join("")}
  `;

  // Ingredients
  document.getElementById("sheetIngredients").innerHTML =
    dish.ingredients.map(i => `<span class="ingredient-chip">${i}</span>`).join("");

  setSheetPlaying(false);

  document.getElementById("sheetOverlay").classList.add("open");
  document.getElementById("sheet").classList.add("open");
  document.body.style.overflow = "hidden";

  // Push history entry so the hardware/browser back button closes the sheet
  history.pushState({ dish: id }, "");
}

function closeSheet() {
  const sheet = document.getElementById("sheet");
  if (!sheet.classList.contains("open")) return;
  stopAudio();
  sheet.classList.remove("open");
  document.getElementById("sheetOverlay").classList.remove("open");
  document.body.style.overflow = "";
  currentDish = null;
  // Pop the history entry we pushed so back doesn't fire again
  history.back();
}

// Hardware back button / browser back ‚Üí close the sheet
window.addEventListener("popstate", () => {
  const sheet = document.getElementById("sheet");
  if (sheet.classList.contains("open")) {
    stopAudio();
    sheet.classList.remove("open");
    document.getElementById("sheetOverlay").classList.remove("open");
    document.body.style.overflow = "";
    currentDish = null;
  }
});

// Close sheet on escape
document.addEventListener("keydown", e => {
  if (e.key === "Escape") closeSheet();
});

// Swipe down to close sheet
let touchStartY = 0;
document.getElementById("sheet").addEventListener("touchstart", e => {
  touchStartY = e.touches[0].clientY;
}, { passive: true });

document.getElementById("sheet").addEventListener("touchend", e => {
  const dy = e.changedTouches[0].clientY - touchStartY;
  if (dy > 80 && document.getElementById("sheet").scrollTop <= 0) {
    closeSheet();
  }
}, { passive: true });

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// INIT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
renderFilterTabs();
renderPills();
renderGrid();

// Pre-load voices on iOS (must be triggered after a user gesture)
document.addEventListener("touchstart", () => {
  if (window.speechSynthesis) speechSynthesis.getVoices();
}, { once: true });

// ‚îÄ‚îÄ PWA Service Worker ‚îÄ‚îÄ
if ("serviceWorker" in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker.register("./sw.js")
      .then(reg => console.log("[SW] Registered:", reg.scope))
      .catch(err => console.warn("[SW] Registration failed:", err));
  });
}
</script>
</body>
</html>
